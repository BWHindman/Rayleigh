#!/bin/sh

if ! type nbstripout > /dev/null
then
        echo "You need to install the nbstripout command."
        echo "Use the Python package manager of your choice (pip, conda, ...)."
        echo "Example: pip install --user nbstripout"
        exit 1
fi

ERR=0
IPYNB="$(git ls-files|grep '\.ipynb$')"
for x in ${IPYNB}
do
        if ! nbstripout < "$x" | diff - "$x" > /dev/null
        then
                echo "$x" still contains output
                ERR=1
        fi
done

return $ERR
